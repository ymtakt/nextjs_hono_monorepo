## テスト方針

基本方針：コンポーネントテストは行わず、ユニットテストのみを行う

### core/

- 設定のみのファイルはテスト不要
- 複雑なロジックを含むサービス層のみテスト対象

### domain/

- domain/logic/ssr/
  対象： Server Component で使用される初期データ取得ロジック
  テスト内容：

API 呼び出しの成功パターン（正常な Entity 変換）
API 呼び出しの失敗パターン（Result 型のエラー処理）
パラメータの適切な変換（number → string 等）
外部依存をモック化したビジネスロジックの検証

- domain/logic/action/
  対象： Client Component で使用される CRUD 操作ロジック
  テスト内容：

Server Action で使用される作成・更新・削除ロジック
リクエストボディの適切な送信確認
レスポンスから Entity への変換処理
エラーハンドリングの一貫性

- domain/logic/util/
  対象： 汎用的なドメインロジック（変換処理など）
  テスト内容：

Entity 変換処理（transformToTodoEntity 等）
条件分岐を含む変換ロジック
フォールバック処理（null/undefined 対応）
純粋関数としての入出力検証

### util/

カスタムフック

- フック内の状態管理ロジック（useState、useEffect 等の動作）を検証する
- 複雑な状態変更や条件分岐を含むフックのみをテスト対象とする
- UI に関する部分はテストしない：

  1.  画面表示やスタイルの確認
  2.  タイマーやアニメーションの動作
  3.  クリックやキーボード入力などの操作
  4.  DOM 要素の取得や変更

- 例：
- Context,Provider を用いた useContext でラップしたカスタムフックについては提供される state や method の確認をする程度で良い
- Provider のテストは行わない

関数

- 最も重要な正常系をカバー
- 基本的な異常系をカバー
- 型定義や定数はテスト不要

### client-page/action.ts

- フォームから送られてきたデータの処理が正しく動作するかを確認する
- 入力値の検証エラーが適切に表示されるかを確認する
- 成功・失敗の状態が正しく返されるかを確認する
- 外部機能（データベース操作など）の呼び出しが正しく行われるかを確認する（実際の処理はモック化する。）
- client-page 内に直接書く関数はテスト対象外とする。（コンポーネント内のロジックが複雑になった場合 action.ts ファイルに切り離しテスト対象にする。）
